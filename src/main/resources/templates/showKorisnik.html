<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" class="no-js" lang="en">

<head>
<meta charset="utf-8">

<!--====== Title ======-->
<title>Proslave</title>

<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!--====== Favicon Icon ======-->
<link rel="icon" href="/images/balloons.jpg" type="image/jpg">

<!--====== Magnific Popup CSS ======-->
<link rel="stylesheet" href="/css/magnific-popup.css">

<!--====== Slick CSS ======-->
<link rel="stylesheet" href="/css/slick.css">

<!--====== Line Icons CSS ======-->
<link rel="stylesheet" href="/css/LineIcons.css">

<!--====== Bootstrap CSS ======-->
<link rel="stylesheet" href="/css/bootstrap.min.css">

<!--====== Default CSS ======-->
<link rel="stylesheet" href="/css/default.css">

<!--====== Style CSS ======-->
<link rel="stylesheet" href="/css/style.css">

<!-- ===== Font awsome ===== -->
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">

</head>

<body>

	<!--====== PRELOADER PART START ======-->

	<div class="preloader">
		<div class="loader">
			<div class="ytp-spinner">
				<div class="ytp-spinner-container">
					<div class="ytp-spinner-rotator">
						<div class="ytp-spinner-left">
							<div class="ytp-spinner-circle"></div>
						</div>
						<div class="ytp-spinner-right">
							<div class="ytp-spinner-circle"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--====== PRELOADER PART ENDS ======-->

	<!--====== NAVBAR TWO PART START ======-->

	<section class="navbar-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<nav class="navbar navbar-expand-lg">

						<a class="navbar-brand" href="#"> </a>

						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTwo" aria-controls="navbarTwo" aria-expanded="false"
							aria-label="Toggle navigation">
							<span class="toggler-icon"></span> <span class="toggler-icon"></span> <span class="toggler-icon"></span>
						</button>

						<div class="collapse navbar-collapse sub-menu-bar" id="navbarTwo">
							<ul class="navbar-nav m-auto">
								<li class="nav-item active"><a class="page-scroll" th:href="@{/}">Nazad na početnu</a></li>
								<li class="nav-item"><a class="page-scroll" href="#contact">Kontakt</a></li>
							</ul>
						</div>

						<div class="navbar-btn d-none d-sm-inline-block">
							<ul th:if="${session.user == null}">
								<li><a type="button" class="solid" data-toggle="modal" data-target="#LoginModal">Prijavi se</a></li>
							</ul>
							<ul th:unless="${session.user == null}">
								<li><a type="button" class="solid" th:href="@{/showKorisnik}"> <i class="far fa-user-circle"></i> poeni: <span
										th:text="${korisnik.poeni}"></span>
								</a></li>
								<li>
									<form th:action="@{/LogOut}" method="post">
										<a type="button" class="solid" th:href="@{/LogOut}">Odjavi se</a>
									</form>
								</li>
							</ul>
						</div>
					</nav>
					<!-- navbar -->
				</div>
			</div>
			<!-- row -->
		</div>
		<!-- container -->
	</section>

	<!--====== NAVBAR TWO PART ENDS ======-->
	
	<!--====== STATUS MODAL START ====== -->
	
	<div class="modal fade" id="StatusModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content reservation">
				<div class="modal-header">
					<h5>Status rezervacije</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="module form-module">
						<div>
							<p id="status-message"></p>
						</div>
					</div>
					<button class="btn btn-primary btn-status update" data-dismiss="modal" data-toggle="modal" data-target="#UpdateReservationModal">Ažuriraj podatke</button>
					<button class="btn btn-danger btn-status delete" data-dismiss="modal" data-toggle="modal" data-target="#DeleteRezervacijaModal">Otkaži rezervaciju</button>
				</div>
			</div>
		</div>
	</div>
	
	<!--====== STATUS MODAL ENDS ====== -->
	
	<!--====== DELETE REZERVACIJA MODAL START -->
	
	<div class="modal fade" id="DeleteRezervacijaModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5>Da li ste sigurni da želite da otkažete rezervaciju?</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="module form-module">
						<div></div>
						<div class="pricing-btn rounded-buttons text-center">
							<a class="btn btn-danger id" href="">Da</a>
							<a class="btn btn-primary" href="" data-dismiss="modal">Ne</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!--====== DELETE REZERVACIJA MODAL ENDS -->
	
	<!--====== RESERVATION MODAL START ======-->
	
	<div class="modal fade" id="UpdateReservationModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5>Unesite nove podatke vaše rezervacije</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="module form-module">
						<div>
						</div>
						<div class="form">
							<form id="updateReservationForm" th:action="@{/updateReservacija}" th:object="${rezervacija}" th:method="post">
								<label>Po svakom detetu stičete <span id="points"></span> bonus poena!</label>
								<input id="statusRez" type="text" th:field="*{status}" value="">
								<input type="hidden" th:field="*{Id}" id="rezervacijaId" value="">
								<input id="proslavaCena" type="hidden"> 
								<input type="date" th:field="*{datum}" placeholder="Datum" required="required">
								<input type="time" th:field="*{vreme}" placeholder="Vreme početka proslave" required="required">
								<label>Unesite broj dece na proslavi</label><br>
								<input id="count" type="number" min="1" max="99">
								<label>  ukupna cena: </label>
								<input id="sum" type="text" placeholder="Ukupna cena" th:field="*{ukupna_cena}" value=""  readonly>
								<input id="bonus" type="hidden" th:field="*{bonus_poeni}" value="">
								<button type="submit">Sačuvaj promene</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!--====== RESERVATION MODAL ENDS ======-->
	

	<!--====== FEATRES TWO PART START ======-->

	<section id="userPanel" class="features-area">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6 col-md-10">
					<div class="section-title text-center pb-10">
						<h3 class="title">Vaš nalog</h3>
						<p class="text">Sve informacije o ovam nalogu, kao i rezervacijama možete da pronađete ovde.</p>
					</div>
					<!-- <div class="alert alert-info" role="alert" th:if="${session.message != null}">
  						<p th:text="${session.message}"></p>
					</div> -->
					<div class="alert alert-info alert-dismissible fade show" role="alert" th:if="${session.message != null}">
						<p th:text="${session.message}"></p>
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<!-- row -->
				</div>
			</div>
			<!-- row -->
			<div id="show-user" class="row justify-content-center">
				<div class="col-lg-4 col-md-7 col-sm-9">
					<div class="single-features mt-40">
						<div class="features-title-icon d-flex justify-content-between">
							<h4 class="features-title">
								<a> <i class="fas fa-user fa-2x"></i>
								</a>
							</h4>
						</div>
						<div class="features-content">
							<div class="form">
								<form th:action="@{/updateKorisnik}" th:object="${korisnik}" th:method="post" class="update">
									<input type="hidden" th:field="*{id}" th:value="${korisnik.Id}"> 
									<label>Ime</label> 
									<input placeholder="Ime" type="text" th:field="*{ime}"> <br>
									<label>Prezime</label> <input placeholder="Prezime" type="text" th:field="*{prezime}"> <br> 
									<label>Email</label> <input type="text"
										placeholder="Email" th:field="*{email}" readonly> <br> 
									<label>Sifra</label> <input type="text" placeholder="Lozinka" th:field="*{sifra}"> <br>
									<label>Tip naloga: </label> 
									<span th:text="${korisnik.tip}"></span> <br> 
									<label>Broj poena: </label> <span th:text="${korisnik.poeni}"></span> <br>
									<button type="submit" class="btn btn-primary btn-status">Ažuriraj podatke</button>
								</form>
							</div>
						</div>
					</div>
					<!-- single features -->
				</div>
				<div class="col-lg-4 col-md-7 col-sm-9">
					<div id="reservations" class="single-features mt-40">
						<div class="features-title-icon d-flex justify-content-between">
							<h4 class="features-title">
								<a>Vaše rezervacije:</a>
							</h4>
						</div>
						<div class="features-content">
							<div th:if="${rezervacije.size() > 0}">
							<table  class="table table-striped">
								<thead>
									<tr>
										<th>Datum</th>
										<th>Agencija</th>
										<th>Proslava</th>
										<th>Cena</th>
										<th>Status</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="rezervacija: ${rezervacije}" th:object="${rezervacija}" th:if="${rezervacija.status != null}">
										<td th:text="${rezervacija.datum}"></td>
										<td th:text="${agencija.getAgencijaNazivById(rezervacija.proslava_id)}"></td>
										<td th:text="${proslava.getProslavaNazivById(rezervacija.proslava_id)}"></td>
										<td th:text="${rezervacija.ukupna_cena}"></td>
										<td><button type="button" class="btn btn-primary satusBtn" th:data-id="${rezervacija.Id}" data-toggle="modal" th:data-message="${rezervacija.poruka}" th:data-price="${proslava.getCenaByRezervacijaId(rezervacija.id)}" th:data-points="${proslava.getProslavaById(rezervacija.proslava_id).getPoeni()}" data-target="#StatusModal" th:text="${rezervacija.status}"></button></td>
									</tr>
								</tbody>
							</table>
							<p id="status-help">*klikom na status možete da saznate dodatne informacije o vašoj rezervaciji</p>
							</div>
							<div th:unless="${rezervacije.size() > 0}">
								<p>Nemate rezervisane proslave</p>
							</div>
							<!-- <a class="features-btn">Pogledaj sve</a> -->
						</div>
					</div>
					<!-- single features -->
				</div>
			</div>
		</div>
		<!-- container -->
	</section>

	<!--====== FEATRES TWO PART ENDS ======-->

	<!--====== CONTACT PART START ======-->

	<section id="contact" class="contact-area">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6 col-md-10">
					<div class="section-title text-center pb-30">
						<h3 class="title">Kontakt</h3>
						<p class="text">Za sve dodatne informacije slobodno nas kontaktirajte ili nas posetite.</p>
					</div>
					<!-- section title -->
				</div>
			</div>
			<!-- row -->
			<div class="row">
				<div class="col-lg-12">
					<div class="contact-map mt-30">
						<iframe id="gmap_canvas" src="https://maps.google.com/maps?q=visokog%20stevana%20beograd&t=&z=13&ie=UTF8&iwloc=&output=embed"
							frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
					</div>
					<!-- row -->
				</div>
			</div>
			<!-- row -->
			<div class="contact-info pt-30">
				<div class="row">
					<div class="col-lg-4 col-md-6">
						<div class="single-contact-info contact-color-1 mt-30 d-flex ">
							<div class="contact-info-icon">
								<i class="lni lni-map-marker"></i>
							</div>
							<div class="contact-info-content media-body">
								<p class="text">
									Visokog Stevana, Beograd <br> 11000 Srbija.
								</p>
							</div>
						</div>
						<!-- single contact info -->
					</div>
					<div class="col-lg-4 col-md-6">
						<div class="single-contact-info contact-color-2 mt-30 d-flex ">
							<div class="contact-info-icon">
								<i class="lni lni-envelope"></i>
							</div>
							<div class="contact-info-content media-body">
								<p class="text">hello@rodjendani.com</p>
								<p class="text">support@rodjendani.com</p>
							</div>
						</div>
						<!-- single contact info -->
					</div>
					<div class="col-lg-4 col-md-6">
						<div class="single-contact-info contact-color-3 mt-30 d-flex ">
							<div class="contact-info-icon">
								<i class="lni lni-phone"></i>
							</div>
							<div class="contact-info-content media-body">
								<p class="text">+381 069-223-553</p>
								<p class="text">+391 011-334-241</p>
							</div>
						</div>
						<!-- single contact info -->
					</div>
				</div>
				<!-- row -->
			</div>
		</div>
		<!-- container -->
	</section>

	<!--====== CONTACT PART ENDS ======-->

	<!--====== FOOTER PART START ======-->

	<section class="footer-area footer-dark">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6">
					<div class="footer-logo text-center">
						<a class="mt-30" href="/"> <img class="logo" src="/images/balloons.jpg" alt="Logo">
						</a>
					</div>
					<!-- footer logo -->
					<ul class="social text-center mt-60">
						<li><a href="https://facebook.com"> <i class="lni lni-facebook-filled"></i>
						</a></li>
						<li><a href="https://twitter.com"> <i class="lni lni-twitter-original"></i>
						</a></li>
						<li><a href="https://instagram.com"> <i class="lni lni-instagram-original"></i>
						</a></li>
						<li><a href="#"> <i class="lni lni-linkedin-original"></i>
						</a></li>
					</ul>
				</div>
			</div>
			<!-- row -->
		</div>
		<!-- container -->
	</section>

	<!--====== FOOTER PART ENDS ======-->

	<!--====== BACK TOP TOP PART START ======-->

	<a href="#" class="back-to-top"> <i class="lni lni-chevron-up"></i>
	</a>

	<!--====== BACK TOP TOP PART ENDS ======-->

	<!--====== Jquery js ======-->
	<script src="/js/vendor/jquery-1.12.4.min.js"></script>
	<script src="/js/vendor/modernizr-3.7.1.min.js"></script>

	<!--====== Bootstrap js ======-->
	<script src="/js/popper.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>

	<!--======= Login/Registration =====-->
	<script>
		// Toggle Function
		$('.toggle').click(function() {
			// Switches the Icon
			$(this).children('i').toggleClass('fa-pencil');
			// Switches the forms  
			$('.form').animate({
				height : "toggle",
				'padding-top' : 'toggle',
				'padding-bottom' : 'toggle',
				opacity : "toggle"
			}, "slow");
		});
		
		$('.btn.btn-primary.satusBtn').click(function(){
			$('#updateReservationForm')[0].reset();
			var status = $(this).text();
			var message = $(this).attr('data-message');
			var proslavaCena = $(this).attr('data-price');
			var id = $(this).attr('data-id');
			var poeni = $(this).attr('data-points');
			$('#statusRez').val(status);
			$('#points').text(poeni);
			$('#rezervacijaId').val(id);
			$('#proslavaCena').val(proslavaCena);
			$('.btn.btn-danger.id').attr("href","deleteRezervacija/" + id);
			if(message == "potvrđena"){
				$('#status-message').html("Rezervacija je potvrđenja!");
			} else if(message != ""){
				$('#status-message').html(message);
			}
		});
		
		$("#count").click(function(){
			var sum = parseInt($(this).val()) * $('#proslavaCena').val();
			var bonus = parseInt($(this).val()) * $('#points').text();
			$('#sum').val(sum);
			$('#bonus').val(bonus);
		});
	</script>

	<!--====== Isotope js ======-->
	<script src="/js/imagesloaded.pkgd.min.js"></script>
	<script src="/js/isotope.pkgd.min.js"></script>

	<!--====== Scrolling Nav js ======-->
	<script src="/js/jquery.easing.min.js"></script>
	<script src="/js/scrolling-nav.js"></script>

	<!--====== Main js ======-->
	<script src="/js/main.js"></script>

</body>

</html>
